<!DOCTYPE html>

<html>
<head>

<meta name="viewport" content="width=624">

<title>MathQuill - WYSIWYG math using only HTML and CSS</title>

<link rel="stylesheet" type="text/css" href="support/home.css">
<link rel="stylesheet" type="text/css" href="mathquill/mathquill.css">
<link rel="stylesheet" type="text/css" href="support/keys.css">
<link rel="icon" type="image/png" href="images/quill_transparant_favicon.png">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="mathquill/mathquill.js"></script>

</head>
<body>

<a href="http://github.com/mathquill/mathquill"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub!"></a>

<h1>MathQuill</h1>
<p id="subtitle">Easily type math in your webapp</p>

<p id="animation">
  Easily type math:
  <span id="math-field-animated"></span>
  <kbd id="rawText" class="light"></kbd>
</p>

<script>
var MQ = MathQuill.getInterface(2); // guaranteed backcompat
var span = $('#math-field-animated')[0];
var mathFieldAnimated = MQ.MathField(span, {
  spaceBehavesLikeTab: true
});
mathFieldAnimated.focus()
$(span).focusout(function() {
  clearTimeout(animationId);
  $('#rawText').fadeOut(1000);
});

var expression = 'x=-b\\pm \\sqrt b^2 -4ac';
var exprLength = expression.length;
var selectLength = 10;
var expressionDenom = '/2a';
var nextCharIndex = 0;

function typeRaw(raw) {
  var cursorCoords = $('#animation .mq-cursor, #animation .mq-selection').offset();
  var containerCoords = $('#animation').offset();
  $('#rawText').text(raw).css({
    display: 'inline',
    top: $('#math-field-animated').offset().top - containerCoords.top + $('#math-field-animated').height() + 10,
    left: cursorCoords.left - containerCoords.left - ($('#rawText').outerWidth()/2) + 2
  });
}

var animationId = setTimeout(typeExpression, 1500);
function typeExpression() {
  // Type numerator
  if (nextCharIndex < exprLength) {
    var character = expression[nextCharIndex];
    if (character == ' ') {
      mathFieldAnimated.keystroke('Spacebar');
      typeRaw('Space');
    } else {
      mathFieldAnimated.typedText(character);
      typeRaw(character);
    }

  // Select numerator
  } else if (nextCharIndex >= exprLength && nextCharIndex < exprLength + selectLength) {
    mathFieldAnimated.keystroke('Shift-Left');
    typeRaw('Shift-Left');
    nextCharIndex++;
    animationId = setTimeout(typeExpression, 150);
    return;

  // Type denominator
  } else {
    var denomIndex = nextCharIndex - (exprLength + selectLength);
    var character = expressionDenom[denomIndex];
    mathFieldAnimated.typedText(character);
    typeRaw(character);
    if (denomIndex === 0) {
      nextCharIndex++;
      animationId = setTimeout(typeExpression, 600);
      return;
    }
  }

  if (nextCharIndex < (exprLength + selectLength + expressionDenom.length - 1)) {
   nextCharIndex++;
   animationId = setTimeout(typeExpression, 500);
  } else {
    $('#rawText').fadeOut(1000);
  }
}
</script>

<p>In your webapp:</p>

<!--- Syntax highlighting courtesy of rouge.jneen.net -->
<pre class="highlight">
<span class="nt">&lt;p&gt;</span>Type math here: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"math-field"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>LaTeX of what you typed: <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"latex"</span><span class="nt">&gt;&lt;/span&gt;&lt;/p&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">MQ</span> <span class="o">=</span> <span class="nx">MathQuill</span><span class="p">.</span><span class="nx">getInterface</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// guaranteed backcompat</span>
<span class="kd">var</span> <span class="nx">mathField</span> <span class="o">=</span> <span class="nx">MQ</span><span class="p">.</span><span class="nx">MathField</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#math-field'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">spaceBehavesLikeTab</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// configurable</span>
  <span class="na">handlers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">edit</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// useful event handlers</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#latex'</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">mathField</span><span class="p">.</span><span class="nx">latex</span><span class="p">());</span> <span class="c1">// simple API</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre>

<p>Type math here: <span id="math-field"></span></p>
<p>LaTeX of what you typed: <span id="latex"></span></p>

<script>
var mathFieldSpan = document.getElementById('math-field');
var latexSpan = document.getElementById('latex');

var MQ = MathQuill.getInterface(2); // guaranteed backcompat
var mathField = MQ.MathField(mathFieldSpan, {
  spaceBehavesLikeTab: true, // configurable
  handlers: {
    edit: function() { // useful event handlers
      latexSpan.textContent = mathField.latex(); // simple API
    }
  }
});
</script>

<h3>Docs + Code</h3>
<p>For more information about how to use MathQuill checkout <a href="http://github.com/mathquill/mathquill#readme">the project README on GitHub</a>.

<h3>About</h3>
<p id="byline">MathQuill is written and maintained by <a href="http://github.com/laughinghan" title="Han">@laughinghan</a>, <a href="http://github.com/jneen" title="Jeanine">@jneen</a>, and <a href="http://github.com/stufflebear" title="Mary">@stufflebear</a>.</p>
<p>MathQuill has been helped by contributions and input from <a href="http://desmos.com">Desmos</a>, whose <a href="http://desmos.com/calculator">slick graphing calculator</a> makes extensive use of it.</p>

<h3>Want More?</h3>
<p>Contact us about what you want added to MathQuill. We accept contracts to build the features you need.</p>

<h3>Contact Us</h3>
<p>Join our Slack: <a href="http://slackin.mathquill.com/">http://slackin.mathquill.com/</a></p>
<p>IRC: #mathquill on Freenode</p>
<p>Project Contact: Han (<a href="mailto:laughinghan@gmail.com">laughinghan@gmail.com</a>)</p>

<p id="footer"></p>
</body>
</html>
